# ═══════════════════════════════════════════════════════════════════════════
# BETTING ODDS API - APPLICATION CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# This file contains all configuration for the Spring Boot application.
# Spring Boot reads this file automatically on startup.

# ═══════════════════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# PostgreSQL connection settings

# JDBC URL - points to PostgreSQL database
# Format: jdbc:postgresql://host:port/database_name
spring.datasource.url=jdbc:postgresql://localhost:5432/betting_test

# Database credentials
spring.datasource.username=postgres
spring.datasource.password=admin123

# ═══════════════════════════════════════════════════════════════════════════
# JPA/HIBERNATE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# Java Persistence API and Hibernate ORM settings

# DDL auto-generation strategy
# Options: none, validate, update, create, create-drop
# - update: Updates schema if entity changes (safe for dev)
# - validate: Only validates schema (production)
# - create-drop: Drops and recreates (testing only!)
spring.jpa.hibernate.ddl-auto=update

# Show SQL queries in console
# true = see all SQL queries (useful for debugging)
# false = hide SQL (cleaner logs in production)
spring.jpa.show-sql=true

# Format SQL queries for readability
# Makes multi-line SQL easier to read in logs
spring.jpa.properties.hibernate.format_sql=true

# ═══════════════════════════════════════════════════════════════════════════
# SERVER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# Embedded Tomcat server settings

# Port number for API
# API will be available at http://localhost:8080
server.port=8080

# Error handling - what to include in error responses
# WARNING: In production, limit these for security!
server.error.include-message=always          
# Include error message
server.error.include-binding-errors=always   
# Include validation errors
server.error.include-stacktrace=on_param     
# Include stack trace only if ?trace=true
server.error.include-exception=true          
# Include exception class name

# ═══════════════════════════════════════════════════════════════════════════
# SWAGGER/OPENAPI CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# Interactive API documentation

# OpenAPI JSON endpoint
# Access at: http://localhost:8080/api-docs
springdoc.api-docs.path=/api-docs

# Swagger UI endpoint
# Access at: http://localhost:8080/swagger-ui.html
springdoc.swagger-ui.path=/swagger-ui.html

# Sort operations by HTTP method (GET, POST, PUT, DELETE)
springdoc.swagger-ui.operationsSorter=method

# Sort tags (controllers) alphabetically
springdoc.swagger-ui.tagsSorter=alpha

# Model expansion depth in UI
springdoc.swagger-ui.defaultModelsExpandDepth=2
springdoc.swagger-ui.defaultModelExpandDepth=2

# ═══════════════════════════════════════════════════════════════════════════
# SPRING BOOT ACTUATOR CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# Production-ready monitoring and management endpoints
#
# Actuator provides health checks, metrics, and management features.
# Used by monitoring tools, load balancers, Kubernetes, etc.

# Expose specific endpoints (comma-separated)
# Available: health, info, metrics, env, beans, mappings, loggers, etc.
# SECURITY: Only expose what you need! In production, secure these endpoints.
management.endpoints.web.exposure.include=health,info,metrics,env,loggers

# Base path for actuator endpoints
# All actuator endpoints will be under /actuator/*
# Example: http://localhost:8080/actuator/health
management.endpoints.web.base-path=/actuator

# ───────────────────────────────────────────────────────────────────────────
# HEALTH ENDPOINT - /actuator/health
# ───────────────────────────────────────────────────────────────────────────
# Used by load balancers and monitoring tools to check if app is alive

# Show detailed health information
# Options: never, when-authorized, always
# - always: Show all details (database status, disk space, etc.)
# - when-authorized: Show only to authenticated users
# - never: Show only UP/DOWN status
# SECURITY: Use 'when-authorized' in production!
management.endpoint.health.show-details=always

# Show individual component health (database, disk space, ping)
management.endpoint.health.show-components=always

# Enable specific health indicators
management.health.db.enabled=true          
# Database connectivity check
management.health.diskspace.enabled=true  
# Disk space check

# ───────────────────────────────────────────────────────────────────────────
# INFO ENDPOINT - /actuator/info
# ───────────────────────────────────────────────────────────────────────────
# Displays custom application information (version, build time, git info)

# Show Git information (commit, branch, etc.)
# Requires git.properties file (generated by Maven git-commit-id plugin)
management.info.git.mode=full

# Show build information (version, artifact, build time)
# Requires build-info.properties file (generated by Maven)
management.info.build.enabled=true

# Show environment information
management.info.env.enabled=true

# ───────────────────────────────────────────────────────────────────────────
# METRICS ENDPOINT - /actuator/metrics
# ───────────────────────────────────────────────────────────────────────────
# Application performance metrics

# Enable JVM metrics (memory, garbage collection, threads)
management.metrics.enable.jvm=true

# Enable HTTP request metrics (count, duration, errors)
management.metrics.enable.http=true

# Enable database metrics (connection pool, query performance)
management.metrics.enable.jdbc=true

# ───────────────────────────────────────────────────────────────────────────
# LOGGERS ENDPOINT - /actuator/loggers
# ───────────────────────────────────────────────────────────────────────────
# View and change log levels at runtime (without restart!)
# Example: POST /actuator/loggers/com.gambling { "configuredLevel": "DEBUG" }

# Allow unrestricted access to loggers endpoint
# SECURITY: In production, secure this endpoint!
management.endpoint.loggers.access=UNRESTRICTED

# ═══════════════════════════════════════════════════════════════════════════
# LOGGING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
# 
# IMPORTANT: Advanced logging is configured in logback-spring.xml
# 
# That file handles:
# - Multiple log files (app.log, errors.log, audit.log, etc.)
# - Log rotation (daily, size-based)
# - Async logging for performance
# - Different profiles (dev/prod/test)
# 
# The settings below are BASIC configuration that works alongside logback.
# If there's a conflict, logback-spring.xml takes precedence.
# ═══════════════════════════════════════════════════════════════════════════

# Active Spring profile (dev, test, prod)
# This determines which logback-spring.xml profile is used
# Options:
# - dev: DEBUG level, console output, show all SQL
# - prod: INFO level, file output only, minimal SQL
# - test: INFO level, console output
spring.profiles.active=dev

# ───────────────────────────────────────────────────────────────────────────
# LOG LEVELS - Per package/class
# ───────────────────────────────────────────────────────────────────────────
# Format: logging.level.<package> = <level>
# Levels: TRACE < DEBUG < INFO < WARN < ERROR < OFF

# Root logging level (applies to all packages not specifically configured)
logging.level.root=INFO

# Our application - DEBUG to see all operations
logging.level.com.gambling.betting_odds_api=DEBUG

# Spring Framework - INFO to reduce noise
logging.level.org.springframework=INFO
logging.level.org.springframework.web=INFO

# Hibernate/JPA - Show SQL queries and parameters
logging.level.org.hibernate.SQL=DEBUG                              
# Show SQL queries
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE  
# Show SQL parameters

# HikariCP connection pool
logging.level.com.zaxxer.hikari=INFO

# ───────────────────────────────────────────────────────────────────────────
# LOG GROUPS - Group related packages for easier configuration
# ───────────────────────────────────────────────────────────────────────────
# Instead of configuring each package individually, group them

logging.group.api=com.gambling.betting_odds_api.controller
logging.group.service=com.gambling.betting_odds_api.service
logging.group.repository=com.gambling.betting_odds_api.repository

# Now you can set log level for entire group:
# logging.level.api=DEBUG
# logging.level.service=INFO

# ───────────────────────────────────────────────────────────────────────────
# LOGBACK INTEGRATION - File settings
# ───────────────────────────────────────────────────────────────────────────
# These settings work WITH logback-spring.xml
# If logback-spring.xml has conflicting settings, it takes precedence

# Log file name and location
# Creates: logs/betting-odds-api.log
logging.file.name=logs/betting-odds-api.log

# Maximum file size before rotation
# When log file reaches 10MB, create new file
logging.logback.rollingpolicy.max-file-size=10MB

# Maximum number of archived log files to keep
# Keep 30 days of logs
logging.logback.rollingpolicy.max-history=30

# Total size cap for all log files
# When total size exceeds 100MB, delete oldest files
logging.logback.rollingpolicy.total-size-cap=100MB

# Temporary - to see CREATE TABLE
spring.jpa.properties.hibernate.show_sql=true
logging.level.org.hibernate.tool.schema=DEBUG
# ═══════════════════════════════════════════════════════════════════════════
# NOTES & BEST PRACTICES
# ═══════════════════════════════════════════════════════════════════════════
#
# 1. ENVIRONMENT-SPECIFIC CONFIGS
#    - Use Spring profiles for different environments
#    - Create: application-dev.properties, application-prod.properties
#    - Activate with: spring.profiles.active=prod
#
# 2. SECURITY
#    - NEVER commit passwords to Git!
#    - Use environment variables: ${DB_PASSWORD}
#    - Or use Spring Cloud Config / Vault for secrets
#
# 3. LOGGING
#    - Use DEBUG in development for detailed info
#    - Use INFO in production to reduce log volume
#    - Use ERROR only for serious issues
#
# 4. ACTUATOR SECURITY
#    - In production, secure actuator endpoints
#    - Use Spring Security to require authentication
#    - Or limit exposure: management.endpoints.web.exposure.include=health
#
# 5. DATABASE
#    - ddl-auto=update is OK for dev
#    - ddl-auto=validate in production (use Flyway/Liquibase for migrations)
#    - show-sql=false in production (use logback for SQL logging)
#
# ═══════════════════════════════════════════════════════════════════════════